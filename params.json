{"name":"Kitchenplan","tagline":"Human readable, yet advanced configuration files and a wrapper script around installation and usage of chef-solo, librarian, chef and bundler to completely install OSX and Ubuntu computers. Heavily influenced by boxen and pivotal_workstation.","body":"# Kitchenplan [![Build Status](https://travis-ci.org/kitchenplan/kitchenplan.png?branch=master)](https://travis-ci.org/kitchenplan/kitchenplan)\r\n\r\nKitchenplan is a small tool to fully automate the installation and configuration of an OSX workstation (or server for that matter) using Chef. But while doing so manually is not a trivial undertaking, Kitchenplan has abstracted away all the hard parts.\r\n\r\n## History\r\n\r\nThis is a brand new implementation of Kitchenplan. If you have issues with this new versions, please use [version2](https://github.com/kitchenplan/kitchenplan/blob/version2/README.md) for now.\r\n\r\n## Using kitchenplan\r\n\r\n### Installation\r\n\r\nFirst of all, you need to install the kitchenplan gem. It only depends on [thor](http://whatisthor.com), [gabba](https://github.com/hybridgroup/gabba) and [deep_merge](https://github.com/danielsdeleo/deep_merge) so it won't dirty up your brand new and clean install.\r\n\r\n```\r\ngem install kitchenplan\r\n```\r\n\r\n### Setting up\r\n\r\nNext up we can start the setup of Kitchenplan. Just run `kitchenplan setup` and you will see the following prompt\r\n\r\n```\r\n  _  ___ _       _                      _\r\n | |/ (_) |     | |                    | |\r\n | ' / _| |_ ___| |__   ___ _ __  _ __ | | __ _ _ __\r\n |  < | | __/ __| '_ \\ / _ \\ '_ \\| '_ \\| |/ _` | '_ \\\r\n | . \\| | || (__| | | |  __/ | | | |_) | | (_| | | | |\r\n |_|\\_\\_|\\__\\___|_| |_|\\___|_| |_| .__/|_|\\__,_|_| |_|\r\n                                 | |\r\n                                 |_|\r\n\r\n-> Installing XCode CLT\r\n         run  sw_vers -productVersion | awk -F \".\" '{print $2}' from \".\"\r\n         run  touch /tmp/.com.apple.dt.CommandLineTools.installondemand.in-progress from \".\"\r\n         run  softwareupdate -l | grep -B 1 \"Developer\" | head -n 1 | awk -F\"*\" '{print $2}' from \".\"\r\n         run  softwareupdate -i  -v from \".\"\r\n\r\nDo you have a config repository? [y,n] n\r\n```\r\n\r\nIf this is you first install using v2.1 of Kitchenplan, your aswer will be no. By doing so Kitchenplan will setup '/opt', create the kitchenplan folder structure, setup a bare configuration and put it all in a local git repository. Put this repository on Github (or any git server) and get to working on the configuration files.\r\n\r\n```\r\n-> Making sure /opt exists and I can write to it\r\n         run  sudo mkdir -p /opt from \".\"\r\n         run  sudo chown -R roderik /opt from \".\"\r\n-> Creating the config folder structure\r\n         run  mkdir -p kitchenplan from \"/opt\"\r\n         run  mkdir -p config from \"/opt/kitchenplan\"\r\n         run  mkdir -p groups from \"/opt/kitchenplan/config\"\r\n         run  mkdir -p people from \"/opt/kitchenplan/config\"\r\n-> Creating the template config files\r\n      create  /opt/kitchenplan/README.md\r\n      create  /opt/kitchenplan/config/default.yml\r\n      create  /opt/kitchenplan/config/groups/groupa.yml\r\n      create  /opt/kitchenplan/config/groups/groupb.yml\r\n      create  /opt/kitchenplan/config/people/roderik.yml\r\n-> Preparing the Cookbook configuration\r\n      create  /opt/kitchenplan/Cheffile\r\n-> Setting up the git repo\r\n      create  /opt/kitchenplan/.gitignore\r\n         run  git init -q from \"/opt/kitchenplan\"\r\n         run  git add -A . from \"/opt/kitchenplan\"\r\n         run  git commit -q -m 'Clean installation of the Kitchenplan configs for user roderik' from \"/opt/kitchenplan\"\r\n=> Now start editing the config files in /opt/kitchenplan/config, push them to a git server and run 'kitchenplan provision'\r\n```\r\n\r\nNow, if you have a config repository, you don't want to start with a bare config but use your version. Answer yes and enter your git repo in the next prompt. It will then fetch your configs.\r\n\r\n```\r\nDo you have a config repository? [y,n] y\r\nPlease enter the clone URL of your git config repository: https://github.com/roderik/kitchenplan-config.git\r\n-> Making sure /opt exists and I can write to it\r\n         run  sudo mkdir -p /opt from \".\"\r\n         run  sudo chown -R roderik /opt from \".\"\r\n-> Fetching https://github.com/roderik/kitchenplan-config.git to /opt/kitchenplan.\r\n         run  git clone -q https://github.com/roderik/kitchenplan-config.git kitchenplan from \"/opt\"\r\n```\r\n\r\n### Editing the config files in /opt/kitchenplan/config\r\n\r\nThe most important file is named after your user in config/people/. In my case a roderik.yml file since my username on my Mac is roderik. When running `kitchenplan setup` will create a YAML file in this folder with your username. You can use your config repository for everyone in your organisation by adding a file per username in the people folder.\r\n\r\nThe final config that will be compiled, will be default.yml + username.yml + the group YAML files defined in username.yml + the group YAML files defined in those groups + the group YAML files defined in default.yml. Everything that is a \"list\" is appended to each other, single value's are overridden.\r\n\r\nNow, how you organise your config files is entirely up to you, but this is how I do it. default.yml are the apps that everyone in my company needs. Then I have a group file per department in our company, and sometimes for a specific subset of people in that department.\r\n\r\nIf you want to see [a fully implemented example, please see my config repository](https://github.com/roderik/kitchenplan-config)\r\n\r\n### Running the install procedure\r\n\r\nRunning Kitchenplan is as easy as running `kitchenplan provision`\r\n\r\n```\r\n  _  ___ _       _                      _\r\n | |/ (_) |     | |                    | |\r\n | ' / _| |_ ___| |__   ___ _ __  _ __ | | __ _ _ __\r\n |  < | | __/ __| '_ \\ / _ \\ '_ \\| '_ \\| |/ _` | '_ \\\r\n | . \\| | || (__| | | |  __/ | | | |_) | | (_| | | | |\r\n |_|\\_\\_|\\__\\___|_| |_|\\___|_| |_| .__/|_|\\__,_|_| |_|\r\n                                 | |\r\n                                 |_|\r\n\r\n-> Setting up bundler\r\n      create  /opt/kitchenplan/Gemfile\r\n         run  mkdir -p vendor/cache from \"/opt/kitchenplan\"\r\n         run  rm -rf vendor/bundle/config from \"/opt/kitchenplan\"\r\n         run  bundle install --quiet --binstubs vendor/bin --path vendor/bundle from \"/opt/kitchenplan\"\r\n-> Sending a ping to Google Analytics\r\n-> Compiling configurations\r\n         run  mkdir -p tmp from \"/opt/kitchenplan\"\r\n-> Fetch the chef cookbooks\r\n         run  vendor/bin/librarian-chef install --clean --quiet --path=vendor/cookbooks from \"/opt/kitchenplan\"\r\n         run  sudo vendor/bin/chef-solo -c tmp/solo.rb -j tmp/kitchenplan-attributes.json -o applications::create_var_chef_cache,homebrewalt::default,nodejs::default,... from \"/opt/kitchenplan\"\r\n```\r\n\r\nAt this point Chef will start installing everything you configured. Depending on your install list, this might take a while. It will hopefully go smooth and end with\r\n\r\n```\r\n-> Cleanup parsed configuration files\r\n         run  rm -f kitchenplan-attributes.json from \"/opt/kitchenplan\"\r\n         run  rm -f solo.rb from \"/opt/kitchenplan\"\r\n=> Installation complete!\r\n```\r\n\r\n## Some blogposts about Kitchenplan\r\n\r\n* [Setting up my perfect dev environment on OSX 10.9 using Chef / Kitchenplan](http://vanderveer.be/setting-up-my-perfect-dev-environment-on-osx-10-9-using-chef-kitchenplan/)\r\n* [Presenting Kitchenplan @ vanderveer.be](http://vanderveer.be/blog/2013/04/14/presenting-kitchenplan/)\r\n\r\n## Contributing to kitchenplan\r\n\r\n* Check out the latest master to make sure the feature hasn't been implemented or the bug hasn't been fixed yet.\r\n* Check out the issue tracker to make sure someone already hasn't requested it and/or contributed it.\r\n* Fork the project.\r\n* Start a feature/bugfix branch.\r\n* Commit and push until you are happy with your contribution.\r\n* Make sure to add tests for it. This is important so I don't break it in a future version unintentionally.\r\n* Please try not to mess with the Rakefile, version, or history. If you want to have your own version, or is otherwise necessary, that is fine, but please isolate to its own commit so I can cherry-pick around it.\r\n\r\n## Copyright\r\n\r\nCopyright (c) 2014 Roderik van der Veer. See LICENSE.txt for further details.\r\n\r\n## Acknowledgements\r\n\r\nThis project is inspired and built by using components and idea's from: Boxen, pivotal_workstation, Opscode cookbooks, and more. Please take any imitation as a the highest form of flattery. If you feel the source or acknowledgements are not sufficient, please let me know how you want it to be resolved.\r\n","google":"UA-46288146-1","note":"Don't delete this file! It's used internally to help with page regeneration."}